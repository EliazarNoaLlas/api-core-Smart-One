{"openapi":"3.0.1","info":{"contact":{}},"servers":[{"url":"/"}],"paths":{"/api/v1/core/policies":{"get":{"tags":["Policies"],"summary":"get policies","description":"get policies","parameters":[{"name":"page","in":"query","description":"page","schema":{"type":"integer"}},{"name":"size_page","in":"query","description":"size page","schema":{"type":"integer"}},{"name":"module_id","in":"query","description":"module id","schema":{"type":"string"}},{"name":"merchant_id","in":"query","description":"merchant id","schema":{"type":"string"}},{"name":"store_id","in":"query","description":"store id","schema":{"type":"string"}}],"responses":{"200":{"description":"Success Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/rest.policiesResult"}}}},"500":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/errorDomain.SmartError"}}}}},"security":[{"BearerAuth":[]}]},"post":{"tags":["Policies"],"summary":"Create a policy","description":"Create a policy","requestBody":{"description":"Create policy body","content":{"application/json":{"schema":{"$ref":"#/components/schemas/domain.CreatePolicyBody"}}},"required":true},"responses":{"201":{"description":"Success Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/httpResponse.IdResult"}}}},"500":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/errorDomain.SmartError"}}}}},"security":[{"BearerAuth":[]}],"x-codegen-request-body-name":"createPolicyBody"}},"/api/v1/core/policies/{policyId}":{"put":{"tags":["Policies"],"summary":"Update a policy","description":"Update a policy","parameters":[{"name":"policyId","in":"path","description":"policy id","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Update policy body","content":{"application/json":{"schema":{"$ref":"#/components/schemas/domain.UpdatePolicyBody"}}},"required":true},"responses":{"200":{"description":"Success Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/httpResponse.StatusResult"}}}},"500":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/errorDomain.SmartError"}}}}},"security":[{"BearerAuth":[]}],"x-codegen-request-body-name":"updatePolicyBody"},"delete":{"tags":["Policies"],"summary":"Delete a policy","description":"Delete a policy","parameters":[{"name":"policyId","in":"path","description":"policy id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Success Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/rest.deletePoliciesResult"}}}},"500":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/errorDomain.SmartError"}}}}},"security":[{"BearerAuth":[]}]}}},"components":{"schemas":{"domain.CreatePolicyBody":{"required":["description","level","module_id","name"],"type":"object","properties":{"description":{"type":"string","description":"Description: the description of the created policy","example":"Politica para accesos a logistica requerimientos en todo el conglomerado"},"enable":{"type":"boolean","description":"Description: enable of the created policy","example":true},"level":{"type":"string","description":"Description: the level of the created policy","example":"system"},"merchant_id":{"type":"string","description":"Description: the merchant_id of the created policy","example":"739bbbc9-7e93-11ee-89fd-0242ac110019"},"module_id":{"type":"string","description":"Description: the module_id of the created policy","example":"739bbbc9-7e93-11ee-89fd-0242ac110018"},"name":{"type":"string","description":"Description: the name of the created policy","example":"LOGISTICA_REQUERIMIENTOS_CONGLOMERADO"},"store_id":{"type":"string","description":"Description: the store_id of the created policy","example":"739bbbc9-7e93-11ee-89fd-0242ac110020"}}},"domain.MerchantByPolicy":{"type":"object","properties":{"description":{"type":"string","description":"Description: the description of the merchant","example":"Proveedor de servicios de mantenimiento"},"document":{"type":"string","description":"Description: the document of the merchant","example":"123456789"},"id":{"type":"string","description":"Description: the id of the merchant","example":"739bbbc9-7e93-11ee-89fd-0242ac110016"},"name":{"type":"string","description":"Description: the name of the merchant","example":"Odin Corp"}}},"domain.ModuleByPolicy":{"type":"object","properties":{"code":{"type":"string","description":"Description: the code of the module","example":"logistic"},"description":{"type":"string","description":"Description: the description of the module","example":"Modulo de log√≠stica"},"id":{"type":"string","description":"Description: the id of the module","example":"739bbbc9-7e93-11ee-89fd-0242ac110018"},"name":{"type":"string","description":"Description: the name of the module","example":"Logistic"}}},"domain.PaginationResults":{"required":["current_page","last_page","size_page","total"],"type":"object","properties":{"current_page":{"type":"integer"},"from":{"type":"integer"},"last_page":{"type":"integer"},"size_page":{"type":"integer"},"to":{"type":"integer"},"total":{"type":"integer"}}},"domain.PermissionByPolicy":{"type":"object","properties":{"code":{"type":"string","description":"Description: the code of the permission","example":"REQUIREMENTS_READ"},"description":{"type":"string","description":"Description: the description of the permission","example":"Permiso para listar requerimientos"},"id":{"type":"string","description":"Description: the id of the permission","example":"739bbbc9-7e93-11ee-89fd-0242ac110010"},"name":{"type":"string","description":"Description: the name of the permission","example":"Listar requerimientos"},"policy_permission":{"$ref":"#/components/schemas/domain.PolicyPermissionByPolicy"}}},"domain.Policy":{"required":["description","enable","id","level","name"],"type":"object","properties":{"created_at":{"type":"string","description":"Description: the created_at of the policy","example":"2023-11-10 08:10:00"},"description":{"type":"string","description":"Description: the description of the policy","example":"Politica para accesos a logistica requerimientos en todo el conglomerado"},"enable":{"type":"boolean","description":"Description: enable of the policy","example":true},"id":{"type":"string","description":"Description: the id of the policy","example":"739bbbc9-7e93-11ee-89fd-0242ac110016"},"level":{"type":"string","description":"Description: the level of the policy","example":"system"},"merchant":{"$ref":"#/components/schemas/domain.MerchantByPolicy"},"module":{"$ref":"#/components/schemas/domain.ModuleByPolicy"},"name":{"type":"string","description":"Description: the name of the policy","example":"LOGISTICA_REQUERIMIENTOS_CONGLOMERADO"},"permissions":{"type":"array","items":{"$ref":"#/components/schemas/domain.PermissionByPolicy"}},"store":{"$ref":"#/components/schemas/domain.StoreByPolicy"}}},"domain.PolicyPermissionByPolicy":{"type":"object","properties":{"enable":{"type":"boolean","description":"Description: enable of the policy permission","example":true},"id":{"type":"string","description":"Description: the id of the policy permission","example":"739bbbc9-7e93-11ee-89fd-0242ac110010"}}},"domain.StoreByPolicy":{"type":"object","properties":{"id":{"type":"string","description":"Description: the id of the store","example":"739bbbc9-7e93-11ee-89fd-0242ac110016"},"name":{"type":"string","description":"Description: the name of the store","example":"Obra av. 28 julio"},"shortname":{"type":"string","description":"Description: the shortname of the store","example":"Obra 28"}}},"domain.UpdatePolicyBody":{"required":["description","level","module_id","name"],"type":"object","properties":{"description":{"type":"string","description":"Description: the description of the update policy","example":"Politica para accesos a logistica requerimientos en todo el conglomerado"},"enable":{"type":"boolean","description":"Description: enable of the update policy","example":true},"level":{"type":"string","description":"Description: the level of the update policy","example":"system"},"merchant_id":{"type":"string","description":"Description: the merchant_id of the update policy","example":"739bbbc9-7e93-11ee-89fd-0242ac110019"},"module_id":{"type":"string","description":"Description: the module_id of the update policy","example":"739bbbc9-7e93-11ee-89fd-0242ac110018"},"name":{"type":"string","description":"Description: the name of the update policy","example":"LOGISTICA_REQUERIMIENTOS_CONGLOMERADO"},"store_id":{"type":"string","description":"Description: the store_id of the update policy","example":"739bbbc9-7e93-11ee-89fd-0242ac110020"}}},"errorDomain.LayerErr":{"type":"string","enum":["domain","infrastructure","interface","use_case"],"x-enum-varnames":["Domain","Infra","Interface","UseCase"]},"errorDomain.LevelErr":{"type":"string","enum":["info","warning","error","fatal"],"x-enum-varnames":["LevelInfo","LevelWarning","LevelError","LevelFatal"]},"errorDomain.SmartError":{"type":"object","properties":{"code":{"type":"string"},"description":{"type":"string"},"error":{"type":"object"},"function":{"type":"string"},"httpStatus":{"type":"integer"},"layer":{"$ref":"#/components/schemas/errorDomain.LayerErr"},"level":{"$ref":"#/components/schemas/errorDomain.LevelErr"},"messages":{"type":"array","items":{"type":"string"}},"raw":{"type":"string"}}},"httpResponse.IdResult":{"required":["data","status"],"type":"object","properties":{"data":{"type":"string","example":"201"},"status":{"type":"integer"}}},"httpResponse.StatusResult":{"required":["status"],"type":"object","properties":{"status":{"type":"integer","example":200}}},"rest.deletePoliciesResult":{"required":["data","status"],"type":"object","properties":{"data":{"type":"boolean"},"status":{"type":"integer"}}},"rest.policiesResult":{"required":["data","pagination","status"],"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/domain.Policy"}},"pagination":{"$ref":"#/components/schemas/domain.PaginationResults"},"status":{"type":"integer"}}}},"securitySchemes":{"BearerAuth":{"type":"apiKey","name":"Authorization","in":"header"}}}}